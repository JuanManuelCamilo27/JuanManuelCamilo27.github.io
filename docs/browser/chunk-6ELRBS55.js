import{a as N}from"./chunk-F5XAGJU5.js";import{$ as x,Aa as m,Fa as O,Ga as o,Ha as a,Ia as v,Ja as y,L as B,La as p,Ma as g,Na as d,O as S,Pa as _,T as j,Ta as f,W as l,Wa as V,_ as M,a as E,ma as A,mb as D,nb as z,ob as L,q as G,qb as h,sa as c,ta as u,va as w,y as F}from"./chunk-D4KGBPOG.js";var k=(()=>{let i=class i{constructor(){this.time=0,this.timerStarted=!1}shuffleArray(e){let t=e.length,n;for(;t!==0;)n=Math.floor(Math.random()*t),t--,[e[t],e[n]]=[e[n],e[t]];return e}shuffleInfCards(e){let t=e.filter(C=>!C.wasClicked);this.shuffle(t);let n=0;for(let C=0;C<e.length;C++)e[C].wasClicked||(e[C]=t[n],n++)}shuffle(e){for(let t=e.length-1;t>0;t--){let n=Math.floor(Math.random()*(t+1));[e[t],e[n]]=[e[n],e[t]]}}startTimer(){this.timerStarted||(this.timerStarted=!0,this.timeInterval=setInterval(()=>{this.time+=1},1e3))}restartTimer(){this.timerStarted=!1,this.time=0,this.stopTimer()}stopTimer(){clearInterval(this.timeInterval)}};i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=S({token:i,factory:i.\u0275fac,providedIn:"root"});let r=i;return r})();var I=(()=>{let i=class i{constructor(e){this.http=e,this.imgUrl="assets/memoryGameImg/list.json"}getImagePaths(){return this.http.get(this.imgUrl).pipe(G(e=>{let t=e.images||[];return this.duplicateImages(t)}))}duplicateImages(e){return e.flatMap(n=>[n,E({},n)])}};i.\u0275fac=function(t){return new(t||i)(j(N))},i.\u0275prov=S({token:i,factory:i.\u0275fac,providedIn:"root"});let r=i;return r})();var R=(()=>{let i=class i{constructor(e,t){this.gameService=e,this.imageService=t,this.resetGame=new w}onResetGameClick(){this.resetGame.emit()}};i.\u0275fac=function(t){return new(t||i)(u(k),u(I))},i.\u0275cmp=l({type:i,selectors:[["app-result-message"]],inputs:{score:"score",time:"time"},outputs:{resetGame:"resetGame"},standalone:!0,features:[f],decls:11,vars:2,consts:[[1,"victory-screen"],[1,"newGameButton",3,"click"]],template:function(t,n){t&1&&(o(0,"div",0)(1,"h1"),d(2," Congratulations! "),v(3,"br"),d(4," You won the game! "),a(),o(5,"p"),d(6),a(),o(7,"p"),d(8),a(),o(9,"button",1),p("click",function(){return n.onResetGameClick()}),d(10,"New Game"),a()()),t&2&&(c(6),_("Score: ",n.score,""),c(2),_("Time: ",n.time,""))},dependencies:[h],styles:[".victory-screen[_ngcontent-%COMP%]{position:absolute;top:70%;left:50%;transform:translate(-50%,-50%);width:800px;height:400px;text-align:center;font-size:1.4em;border:3px solid black;border-radius:10px;background-color:#ebeb5a;padding:3rem}.victory-screen[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.4em}.victory-screen[_ngcontent-%COMP%]   .newGameButton[_ngcontent-%COMP%]{color:#000;border:1px solid black;border-radius:5px;padding:1rem;font-size:1.5em;background-color:#d3d3d3;cursor:pointer}.victory-screen[_ngcontent-%COMP%]   .newGameButton[_ngcontent-%COMP%]:hover{background-color:#646464}"]});let r=i;return r})();var W=(()=>{let i=class i{constructor(e,t){this.gameService=e,this.imageService=t}};i.\u0275fac=function(t){return new(t||i)(u(k),u(I))},i.\u0275cmp=l({type:i,selectors:[["app-game-over"]],standalone:!0,features:[f],decls:3,vars:0,consts:[[1,"defeat-screen"]],template:function(t,n){t&1&&(o(0,"div",0)(1,"p"),d(2,"You clicked the same card twice without finding a match"),a()())},dependencies:[h],styles:[".defeat-screen[_ngcontent-%COMP%]{position:fixed;top:20px;right:20px;background-color:#f44336;color:#fff;padding:15px;border-radius:5px;box-shadow:0 4px 8px #0000001a;z-index:1000}.defeat-screen[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px;font-weight:700}.defeat-screen[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{cursor:pointer;font-size:1em}"]});let r=i;return r})();var q=(r,i,s)=>({flipped:r,disabled:i,clicked:s}),U=(()=>{let i=class i{constructor(){this.cardClicked=new w}onCardClick(){this.card.isFlipped||(this.card.isFlipped=!0,this.cardClicked.emit(this.card))}};i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=l({type:i,selectors:[["app-card"]],inputs:{card:"card"},outputs:{cardClicked:"cardClicked"},standalone:!0,features:[f],decls:2,vars:6,consts:[[1,"card",3,"ngClass","click"],["alt","card",3,"src"]],template:function(t,n){t&1&&(o(0,"div",0),p("click",function(){return n.onCardClick()}),v(1,"img",1),a()),t&2&&(m("ngClass",V(2,q,n.card.isFlipped,n.card.disableClick,n.card.wasClicked)),c(1),m("src",n.card.isFlipped?n.card.imageSrc:"",A))},dependencies:[h,D],styles:[".card[_ngcontent-%COMP%]{width:140px;height:140px;border:5px solid black;border-radius:10px;background-color:#454545;margin:5px;cursor:pointer;transition:transform .25s ease}.card[_ngcontent-%COMP%]:hover{background-color:#131313}.card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:140px;height:140px;opacity:0;border-radius:10px}.flipped[_ngcontent-%COMP%]{transform:rotateY(180deg)}.flipped[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{opacity:1;transition:1s;background-color:#fff;border-radius:10px}.disabled[_ngcontent-%COMP%]{pointer-events:none}.clicked[_ngcontent-%COMP%]{background-color:#000}"]});let r=i;return r})();function J(r,i){if(r&1){let s=y();o(0,"div")(1,"app-card",9),p("cardClicked",function(t){M(s);let n=g(2);return x(n.handleCardClick(t))}),a()()}if(r&2){let s=i.$implicit;c(1),m("card",s)}}function K(r,i){if(r&1){let s=y();o(0,"div",3)(1,"div",4)(2,"h2"),d(3,"Memory Game - Normal Mode"),a()(),o(4,"div",5),O(5,J,2,1,"div",6),a(),o(6,"div",7)(7,"p"),d(8,"Bored? Try:"),a(),o(9,"button",8),p("click",function(){M(s);let t=g();return x(t.infinityMode())}),d(10,"Infinity Mode"),a()()()}if(r&2){let s=g();c(5),m("ngForOf",s.cards)}}function Q(r,i){if(r&1){let s=y();o(0,"div")(1,"app-card",9),p("cardClicked",function(t){M(s);let n=g(2);return x(n.handleInfinityCardClick(t))}),a()()}if(r&2){let s=i.$implicit;c(1),m("card",s)}}function X(r,i){if(r&1){let s=y();o(0,"div",3)(1,"div",4)(2,"h2"),d(3,"Memory Game - Infinity Mode"),a()(),o(4,"div",5),O(5,Q,2,1,"div",6),a(),o(6,"div",7)(7,"p"),d(8,"Too difficult? Try:"),a(),o(9,"button",8),p("click",function(){M(s);let t=g();return x(t.normalMode())}),d(10,"Normal Mode"),a()()()}if(r&2){let s=g();c(5),m("ngForOf",s.cards)}}function Z(r,i){if(r&1){let s=y();o(0,"div")(1,"app-result-message",10),p("resetGame",function(){M(s);let t=g();return x(t.resetGame())}),a()()}if(r&2){let s=g();c(1),m("score",s.score)("time",s.gameService.time)}}function ee(r,i){r&1&&(o(0,"div"),v(1,"app-game-over"),a())}var Y=(()=>{let i=class i{constructor(e,t){this.imageLoaderService=e,this.gameService=t,this.cards=[],this.flippedCards=[],this.gameWon=!1,this.gameLost=!1,this.moves=0,this.misses=0,this.score=0,this.infinityModeGame=!1,this.cardArr=[]}ngOnInit(){this.loadImages(),this.gameService.restartTimer()}loadImages(){this.imageLoaderService.getImagePaths().pipe(B(e=>{let t=this.gameService.shuffleArray([...e]);this.cards=t.map(n=>({id:n.id,imageSrc:n.path,isMatched:!1,isFlipped:!1,disableClick:!1,attempts:0,wasClicked:!1}))}),F(e=>{throw console.error("Error loading image paths",e),e})).subscribe()}handleCardClick(e){this.gameService.startTimer(),e&&(this.flippedCards.push(e),this.flippedCards.length===2&&(this.moves++,this.disableAllCards(),this.checkForMatch()))}checkForMatch(){let[e,t]=this.flippedCards;e.id===t.id?(e.isMatched=!0,t.isMatched=!0,this.score++):this.misses++,setTimeout(()=>{this.cards.forEach(n=>{n.isMatched||(n.isFlipped=!1,n.disableClick=!1)}),this.flippedCards=[],this.gameWon=this.cards.every(n=>n.isMatched),this.gameWon&&this.gameService.stopTimer()},1e3)}resetGame(){this.gameWon=!1,this.gameLost=!1,this.loadImages(),this.gameService.restartTimer(),this.score=0,this.moves=0,this.misses=0,this.flippedCards=[]}disableAllCards(){this.cards.forEach(e=>{e.disableClick=!0})}normalMode(){this.resetGame(),this.infinityModeGame=!1}infinityMode(){this.resetGame(),this.infinityModeGame=!0,this.cardArr=[]}handleInfinityCardClick(e){this.gameService.startTimer(),e&&(e.wasClicked=!0,this.flippedCards.push(e),this.flippedCards.length===2&&(this.moves++,this.disableAllCards(),this.infinityCheckForMatch()))}infinityCheckForMatch(){let[e,t]=this.flippedCards;e.id===t.id?this.handleMatchingCards(e,t):this.handleMismatchedCards(e,t),this.resetCardsAfterDelay()}handleMatchingCards(e,t){this.score++,e.attempts=0,t.attempts=0,e.wasClicked=!1,t.wasClicked=!1,setTimeout(()=>{this.gameService.shuffleInfCards(this.cards)},1e3)}handleMismatchedCards(e,t){e.attempts===1||t.attempts===1||this.cardArr.includes(e.id)?this.handleGameLoss():this.handleAttemptsIncrementAndRecord(e,t)}handleGameLoss(){this.misses++,this.gameLost=!0,setTimeout(()=>{this.infinityMode()},1200)}handleAttemptsIncrementAndRecord(e,t){e.attempts++,t.attempts++,this.cardArr.push(e.id,t.id)}resetCardsAfterDelay(){setTimeout(()=>{this.resetAllCards()},1e3)}resetAllCards(){this.cards.forEach(e=>{e.isFlipped=!1,e.disableClick=!1}),this.flippedCards=[]}};i.\u0275fac=function(t){return new(t||i)(u(I),u(k))},i.\u0275cmp=l({type:i,selectors:[["app-board"]],standalone:!0,features:[f],decls:13,vars:8,consts:[[1,"scoreboard"],["class","board",4,"ngIf"],[4,"ngIf"],[1,"board"],[1,"title"],[1,"cards"],[4,"ngFor","ngForOf"],[1,"gamemodeButton"],[3,"click"],[3,"card","cardClicked"],[3,"score","time","resetGame"]],template:function(t,n){t&1&&(o(0,"div",0)(1,"p"),d(2),a(),o(3,"p"),d(4),a(),o(5,"p"),d(6),a(),o(7,"p"),d(8),a()(),O(9,K,11,1,"div",1)(10,X,11,1,"div",1)(11,Z,2,2,"div",2)(12,ee,2,0,"div",2)),t&2&&(c(2),_("Score: ",n.score,""),c(2),_("Moves: ",n.moves,""),c(2),_("Misses: ",n.misses,""),c(2),_("Time: ",n.gameService.time,""),c(1),m("ngIf",!n.infinityModeGame),c(1),m("ngIf",n.infinityModeGame),c(1),m("ngIf",n.gameWon),c(1),m("ngIf",n.gameLost))},dependencies:[h,z,L,U,R,W],styles:[".scoreboard[_ngcontent-%COMP%]{display:flex;justify-content:space-around;font-size:1.2em;border:1px solid black}.board[_ngcontent-%COMP%]{display:flex;flex-direction:column}.board[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{display:flex;justify-content:center;width:100%;background-color:#5a5a5a}.board[_ngcontent-%COMP%]   .cards[_ngcontent-%COMP%]{display:flex;justify-content:center;flex-wrap:wrap;margin:2rem 6rem}.board[_ngcontent-%COMP%]   .gamemodeButton[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:center;align-items:center;gap:1rem;background-color:#5a5a5a}.board[_ngcontent-%COMP%]   .gamemodeButton[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.3em;font-weight:800}.board[_ngcontent-%COMP%]   .gamemodeButton[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{cursor:pointer;padding:1rem 4rem;font-size:1.3em}"]});let r=i;return r})();var $=(()=>{let i=class i{};i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=l({type:i,selectors:[["app-memory"]],standalone:!0,features:[f],decls:1,vars:0,consts:[[1,"board"]],template:function(t,n){t&1&&v(0,"app-board",0)},dependencies:[h,Y]});let r=i;return r})();var Oe=[{path:"",component:$}];export{Oe as routes};
